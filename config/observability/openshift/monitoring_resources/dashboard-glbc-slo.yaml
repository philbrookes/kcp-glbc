# Code generated by dhall-to-yaml.  DO NOT EDIT.
apiVersion: v1alpha1
kind: GrafanaDashboard
metadata:
  labels:
    app: glbc
  name: glbc-slo-dashboard
  namespace: monitoring
spec:
  json: "{\n  \"annotations\": {\n    \"list\": [\n      {\n        \"builtIn\": 1,\n        \"datasource\": \"$datasource\",\n        \"enable\": true,\n        \"hide\": true,\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\n        \"name\": \"Annotations & Alerts\",\n        \"type\": \"dashboard\"\n      }\n    ]\n  },\n  \"editable\": true,\n  \"fiscalYearStartMonth\": 0,\n  \"graphTooltip\": 0,\n  \"id\": 2,\n  \"iteration\": 1658929996232,\n  \"links\": [],\n  \"liveNow\": false,\n  \"panels\": [\n    {\n      \"collapsed\": false,\n      \"gridPos\": {\n        \"h\": 1,\n        \"w\": 24,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"id\": 2,\n      \"panels\": [],\n      \"title\": \"SLO Ingress Admission Latency\",\n      \"type\": \"row\"\n    },\n    {\n      \"description\": \"\",\n      \"gridPos\": {\n        \"h\": 5,\n        \"w\": 23,\n        \"x\": 0,\n        \"y\": 1\n      },\n      \"id\": 8,\n      \"options\": {\n        \"content\": \"# Service Level Indicator (SLI)\\nThe proportion of sufficiently fast Ingress admissions, as measured from ingress creation through to admission time in the gateway. \\\"Sufficiently fast\\\" is defined as < 2 minutes , or < 5 minutes.\\n\\n# Service Level Objective (SLO)\\n50% of admissions < 2 minutes, and 60% of admissions < 5 minutes\",\n        \"mode\": \"markdown\"\n      },\n      \"pluginVersion\": \"8.3.3\",\n      \"type\": \"text\"\n    },\n    {\n      \"datasource\": \"$datasource\",\n      \"description\": \"Shows the SLO performance % for the selected time range. For example, selecting a 1 week range will aggregate that 1 week of data. This stat is useful for fixed range SLO reporting, while the graph is not (it's a sliding window view). For example, if you want a 28 day SLO % for a specific 28 day period, choosing that date range should give you what you need.\",\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"mappings\": [],\n          \"max\": 1,\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 50\n              }\n            ]\n          },\n          \"unit\": \"percentunit\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 6,\n        \"x\": 0,\n        \"y\": 6\n      },\n      \"id\": 6,\n      \"options\": {\n        \"colorMode\": \"value\",\n        \"graphMode\": \"none\",\n        \"justifyMode\": \"auto\",\n        \"orientation\": \"auto\",\n        \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n        \"textMode\": \"auto\"\n      },\n      \"pluginVersion\": \"8.3.3\",\n      \"targets\": [\n        {\n          \"datasource\": \"$datasource\",\n          \"exemplar\": true,\n          \"expr\": \"sum by(namespace) (rate(glbc_ingress_managed_object_time_to_admission_bucket{container=\\\"manager\\\",namespace=\\\"$namespace\\\",job=~\\\".*kcp-glbc-controller-manager\\\",le=\\\"120\\\"}[$__range]))\\n/ on(namespace)\\nsum by(namespace) (rate(glbc_ingress_managed_object_time_to_admission_count{container=\\\"manager\\\",namespace=\\\"$namespace\\\",job=~\\\".*kcp-glbc-controller-manager\\\"}[$__range]))\",\n          \"instant\": false,\n          \"interval\": \"\",\n          \"legendFormat\": \"\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"SLO - 50% of admissions < 2 minutes\",\n      \"type\": \"stat\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"prometheus\",\n        \"uid\": \"$datasource\"\n      },\n      \"description\": \"Shows the SLO performance % over the selected time range. The selected time range determines both how much data to graph and how much lookback data to include for each graph point. For example, selecting a 1 week range, actually uses 2 weeks of data to draw the graph. The first point will aggregate data from 1 week previous, and so on until the latest point. These are a good inidcator of SLO performance over a sliding window and should not be used for fixed window reporting i.e. a 28 day fixed dates SLO.\",\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 0,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"max\": 1,\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"percentunit\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 17,\n        \"x\": 6,\n        \"y\": 6\n      },\n      \"id\": 4,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"hidden\",\n          \"placement\": \"bottom\"\n        },\n        \"tooltip\": {\n          \"mode\": \"multi\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": \"$datasource\",\n          \"exemplar\": true,\n          \"expr\": \"sum by(namespace) (rate(glbc_ingress_managed_object_time_to_admission_bucket{container=\\\"manager\\\",namespace=\\\"$namespace\\\",job=~\\\".*kcp-glbc-controller-manager\\\",le=\\\"120\\\"}[$__range]))\\n/ on(namespace)\\nsum by(namespace) (rate(glbc_ingress_managed_object_time_to_admission_count{container=\\\"manager\\\",namespace=\\\"$namespace\\\",job=~\\\".*kcp-glbc-controller-manager\\\"}[$__range]))\",\n          \"interval\": \"\",\n          \"legendFormat\": \"SLO %\",\n          \"refId\": \"A\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"$datasource\"\n          },\n          \"exemplar\": true,\n          \"expr\": \"vector(0.5)\",\n          \"hide\": false,\n          \"interval\": \"\",\n          \"legendFormat\": \"Threshold\",\n          \"refId\": \"B\"\n        }\n      ],\n      \"title\": \"SLO - 50% of admissions < 2 minutes -  over time\",\n      \"type\": \"timeseries\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"prometheus\",\n        \"uid\": \"$datasource\"\n      },\n      \"description\": \"Shows the SLO performance % for the selected time range. For example, selecting a 1 week range will aggregate that 1 week of data. This stat is useful for fixed range SLO reporting, while the graph is not (it's a sliding window view). For example, if you want a 28 day SLO % for a specific 28 day period, choosing that date range should give you what you need.\",\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"thresholds\"\n          },\n          \"mappings\": [],\n          \"max\": 1,\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 60\n              }\n            ]\n          },\n          \"unit\": \"percentunit\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 6,\n        \"x\": 0,\n        \"y\": 14\n      },\n      \"id\": 9,\n      \"options\": {\n        \"colorMode\": \"value\",\n        \"graphMode\": \"none\",\n        \"justifyMode\": \"auto\",\n        \"orientation\": \"auto\",\n        \"reduceOptions\": {\n          \"calcs\": [\n            \"lastNotNull\"\n          ],\n          \"fields\": \"\",\n          \"values\": false\n        },\n        \"textMode\": \"auto\"\n      },\n      \"pluginVersion\": \"8.3.3\",\n      \"targets\": [\n        {\n          \"datasource\": \"$datasource\",\n          \"exemplar\": true,\n          \"expr\": \"sum by(namespace) (rate(glbc_ingress_managed_object_time_to_admission_bucket{container=\\\"manager\\\",namespace=\\\"$namespace\\\",job=~\\\".*kcp-glbc-controller-manager\\\",le=\\\"300\\\"}[$__range]))\\n/ on(namespace)\\nsum by(namespace) (rate(glbc_ingress_managed_object_time_to_admission_count{container=\\\"manager\\\",namespace=\\\"$namespace\\\",job=~\\\".*kcp-glbc-controller-manager\\\"}[$__range]))\",\n          \"instant\": false,\n          \"interval\": \"\",\n          \"legendFormat\": \"\",\n          \"refId\": \"A\"\n        }\n      ],\n      \"title\": \"SLO - 60% of admissions < 5 minutes\",\n      \"type\": \"stat\"\n    },\n    {\n      \"datasource\": {\n        \"type\": \"prometheus\",\n        \"uid\": \"$datasource\"\n      },\n      \"description\": \"Shows the SLO performance % over the selected time range. The selected time range determines both how much data to graph and how much lookback data to include for each graph point. For example, selecting a 1 week range, actually uses 2 weeks of data to draw the graph. The first point will aggregate data from 1 week previous, and so on until the latest point. These are a good inidcator of SLO performance over a sliding window and should not be used for fixed window reporting i.e. a 28 day fixed dates SLO.\",\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"color\": {\n            \"mode\": \"palette-classic\"\n          },\n          \"custom\": {\n            \"axisLabel\": \"\",\n            \"axisPlacement\": \"auto\",\n            \"barAlignment\": 0,\n            \"drawStyle\": \"line\",\n            \"fillOpacity\": 0,\n            \"gradientMode\": \"none\",\n            \"hideFrom\": {\n              \"legend\": false,\n              \"tooltip\": false,\n              \"viz\": false\n            },\n            \"lineInterpolation\": \"linear\",\n            \"lineWidth\": 1,\n            \"pointSize\": 5,\n            \"scaleDistribution\": {\n              \"type\": \"linear\"\n            },\n            \"showPoints\": \"auto\",\n            \"spanNulls\": false,\n            \"stacking\": {\n              \"group\": \"A\",\n              \"mode\": \"none\"\n            },\n            \"thresholdsStyle\": {\n              \"mode\": \"off\"\n            }\n          },\n          \"mappings\": [],\n          \"max\": 1,\n          \"min\": 0,\n          \"thresholds\": {\n            \"mode\": \"absolute\",\n            \"steps\": [\n              {\n                \"color\": \"green\",\n                \"value\": null\n              },\n              {\n                \"color\": \"red\",\n                \"value\": 80\n              }\n            ]\n          },\n          \"unit\": \"percentunit\"\n        },\n        \"overrides\": []\n      },\n      \"gridPos\": {\n        \"h\": 8,\n        \"w\": 17,\n        \"x\": 6,\n        \"y\": 14\n      },\n      \"id\": 10,\n      \"options\": {\n        \"legend\": {\n          \"calcs\": [],\n          \"displayMode\": \"hidden\",\n          \"placement\": \"bottom\"\n        },\n        \"tooltip\": {\n          \"mode\": \"multi\"\n        }\n      },\n      \"targets\": [\n        {\n          \"datasource\": \"$datasource\",\n          \"exemplar\": true,\n          \"expr\": \"sum by(namespace) (rate(glbc_ingress_managed_object_time_to_admission_bucket{container=\\\"manager\\\",namespace=\\\"$namespace\\\",job=~\\\".*kcp-glbc-controller-manager\\\",le=\\\"300\\\"}[$__range]))\\n/ on(namespace)\\nsum by(namespace) (rate(glbc_ingress_managed_object_time_to_admission_count{container=\\\"manager\\\",namespace=\\\"$namespace\\\",job=~\\\".*kcp-glbc-controller-manager\\\"}[$__range]))\",\n          \"interval\": \"\",\n          \"legendFormat\": \"SLO %\",\n          \"refId\": \"A\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"$datasource\"\n          },\n          \"exemplar\": true,\n          \"expr\": \"vector(0.6)\",\n          \"hide\": false,\n          \"interval\": \"\",\n          \"legendFormat\": \"Threshold\",\n          \"refId\": \"B\"\n        }\n      ],\n      \"title\": \"SLO - 60% of admissions < 5 minutes -  over time\",\n      \"type\": \"timeseries\"\n    }\n  ],\n  \"refresh\": false,\n  \"schemaVersion\": 34,\n  \"style\": \"dark\",\n  \"tags\": [],\n  \"templating\": {\n    \"list\": [\n      {\n        \"current\": {\n          \"selected\": false,\n          \"text\": \"prometheus\",\n          \"value\": \"prometheus\"\n        },\n        \"hide\": 0,\n        \"includeAll\": false,\n        \"label\": \"Data Source\",\n        \"multi\": false,\n        \"name\": \"datasource\",\n        \"options\": [],\n        \"query\": \"prometheus\",\n        \"refresh\": 1,\n        \"regex\": \"\",\n        \"skipUrlSync\": false,\n        \"type\": \"datasource\"\n      },\n      {\n        \"current\": {\n          \"selected\": false,\n          \"text\": \"kcp89b5fd4ba9405ee7b18d0da859ce7420d36926bac4a97e01af5c244a\",\n          \"value\": \"kcp89b5fd4ba9405ee7b18d0da859ce7420d36926bac4a97e01af5c244a\"\n        },\n        \"datasource\": \"$datasource\",\n        \"definition\": \"label_values(glbc_controller_reconcile_total, namespace)\",\n        \"hide\": 0,\n        \"includeAll\": false,\n        \"label\": \"Namespace (filtered to glbc namespaces)\",\n        \"multi\": false,\n        \"name\": \"namespace\",\n        \"options\": [],\n        \"query\": {\n          \"query\": \"label_values(glbc_controller_reconcile_total, namespace)\",\n          \"refId\": \"StandardVariableQuery\"\n        },\n        \"refresh\": 1,\n        \"regex\": \"\",\n        \"skipUrlSync\": false,\n        \"sort\": 0,\n        \"tagValuesQuery\": \"\",\n        \"tags\": [],\n        \"tagsQuery\": \"\",\n        \"type\": \"query\",\n        \"useTags\": false\n      }\n    ]\n  },\n  \"time\": {\n    \"from\": \"now-3h\",\n    \"to\": \"now\"\n  },\n  \"timepicker\": {\n    \"refresh_intervals\": [],\n    \"time_options\": []\n  },\n  \"timezone\": \"browser\",\n  \"title\": \"GLBC / SLO\",\n  \"uid\": \"RK0iFmzVz\",\n  \"version\": 1,\n  \"weekStart\": \"\"\n}"
